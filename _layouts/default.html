<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {% include head.html %}

  <body>

    <div class="container pure-g">
      {%- assign cover_bg_color = site.cover_bg_color | default: "rgb(40, 73, 77)" -%}
      {%- assign cover_color    = site.cover_color    | default: "rgb(255, 255, 255)" -%}
      {%- assign cover_image    = site.cover_image -%}
      {%- if page.cover_bg_color -%}
        {%- assign cover_bg_color  = page.cover_bg_color -%}
      {%- endif -%}
      {%- if page.cover_color -%}
        {%- assign cover_color     = page.cover_color -%}
      {%- endif -%}
      {%- if page.cover_image -%}
        {%- assign cover_image     = page.cover_image -%}
      {%- endif -%}
      <div id="sidebar-left" class="sidebar-left pure-u-1 pure-u-md-1-4" style="background-color: {{ cover_bg_color }}; color: {{ cover_color}}; {% if cover_image %}background-image: url({{ cover_image | relative_url }});{% endif %}">
        {%- include sidebar-left.html -%}
      </div>

      <div class="content pure-u-1 pure-u-md-1-2">
        {%- include content.html -%}
      </div>
      <div class="sidebar-right pure-u-1 pure-u-md-1-4">
        {%- include sidebar-right.html -%}
      </div>
    </div>

    <script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>

    {%- include scroll.html -%}

    {%- if page.math -%}
      {% include mathjax.html %}
    {%- endif -%}

    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}

    <script>
      // 动态背景更换功能
      document.addEventListener('DOMContentLoaded', function() {
        // 获取所有背景图片路径
        const backgroundImages = [
          '/bg/微信图片_20260110094704_267_58.jpg',
          '/bg/微信图片_20260110094705_268_58.jpg',
          '/bg/微信图片_20260110094706_269_58.jpg',
          '/bg/微信图片_20260110094707_270_58.jpg',
          '/bg/微信图片_20260110094711_271_58.jpg',
          '/bg/微信图片_20260110094713_272_58.jpg',
          '/bg/微信图片_20260110094716_273_58.jpg',
          '/bg/微信图片_20260110094719_274_58.jpg',
          '/bg/微信图片_20260110094722_275_58.jpg',
          '/bg/微信图片_20260110094724_276_58.jpg',
          '/bg/微信图片_20260110094727_277_58.jpg',
          '/bg/微信图片_20260110094730_278_58.jpg',
          '/bg/微信图片_20260110094732_279_58.jpg',
          '/bg/微信图片_20260110094734_280_58.jpg',
          '/bg/微信图片_20260110094736_281_58.jpg',
          '/bg/微信图片_20260110094738_282_58.jpg',
          '/bg/微信图片_20260110094739_283_58.jpg',
          '/bg/微信图片_20260110094741_284_58.jpg',
          '/bg/微信图片_20260110094743_285_58.jpg',
          '/bg/微信图片_20260110094744_286_58.jpg'
        ];

        let currentIndex = 0;
        const sidebar = document.getElementById('sidebar-left');
        
        // 预加载所有图片
        const preloadImages = [];
        backgroundImages.forEach(imgSrc => {
          const img = new Image();
          img.src = imgSrc;
          preloadImages.push(img);
        });

        // 更换背景图片的函数
        function changeBackground() {
          // 淡出效果
          sidebar.style.opacity = '0.7';
          
          setTimeout(() => {
            // 更换背景图片
            sidebar.style.backgroundImage = `url(${backgroundImages[currentIndex]})`;
            
            // 淡入效果
            setTimeout(() => {
              sidebar.style.opacity = '1';
            }, 300);
            
            // 更新索引
            currentIndex = (currentIndex + 1) % backgroundImages.length;
          }, 500);
        }

        // 设置初始背景（使用第一张图片）
        sidebar.style.backgroundImage = `url(${backgroundImages[0]})`;
        sidebar.style.backgroundSize = 'cover';
        sidebar.style.backgroundPosition = 'center';
        sidebar.style.backgroundRepeat = 'no-repeat';
        sidebar.style.transition = 'opacity 0.5s ease-in-out, background-image 0.5s ease-in-out';
        
        // 设置定时器，每10秒更换一次背景
        setInterval(changeBackground, 10000);
        
        // 首次更换背景（5秒后开始）
        setTimeout(() => {
          currentIndex = 1; // 从第二张图片开始
          changeBackground();
        }, 5000);
      });
    </script>
  </body>
</html>